<!DOCTYPE html>

<html lang="ru">

<head>

  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  

  <style>

.search-sort-row {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
  width: 100%;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}
.search-sort-row input,
.search-sort-row select,
.search-sort-row .other-site-btn {
  flex: 1 1 0;
  width: 100%;
  max-width: none;
  box-sizing: border-box;
  margin: 10px auto; /* добавьте эту строку */
}
.other-site-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #007bff;
  color: #fff !important;
  text-align: center;
  padding: 10px 0;
  border-radius: 5px;
  text-decoration: none;
  transition: background 0.2s;
  font-weight: bold;
  height: 100%;
}
.other-site-btn:hover {
  background: #0056b3;
}
@media (max-width: 600px) {
  .search-sort-row {
    flex-direction: column;
    gap: 0;
    max-width: 100%;
  }
  .other-site-btn {
    margin-top: 8px;
  }
}


body.modal-open {
  overflow: hidden;           /* Запретить прокрутку */
  pointer-events: none;       /* Запретить клики по всему body */
}
#previewBlock {
  pointer-events: auto !important; /* Разрешить клики по модальному окну */
}

 button.delete-item {
  background: none; /* Убираем фон */
  border: none; /* Убираем границу */
  color: #dc3545; /* Красный цвет для кнопки */
  font-size: 14px; /* Размер текста */
  cursor: pointer; /* Указываем, что это кнопка */
  padding: 0; /* Убираем лишние внутренние отступы */
  width: 20px; /* Устанавливаем фиксированную ширину */
  height: 20px; /* Устанавливаем фиксированную высоту */
  border-radius: 20%; /* Делаем кнопку круглой */
  line-height: 1; /* Убираем лишние отступы внутри кнопки */
  display: flex; /* Центрируем содержимое */
  align-items: center;
  justify-content: center;
}

button.delete-item:hover {
  color: #c82333; /* Более тёмный красный при наведении */
}

    body {

  background-image: url('фон.avif'); /* сюда вставь ссылку или путь к картинке */

  background-size: cover;

  background-repeat: no-repeat;

  background-position: center center;

}



    * { box-sizing: border-box; margin: 0; padding: 0; }

    body { font-family: 'Arial', sans-serif; background: #f4f4f4; color: #333; }

    h1, h2 { text-align: center; margin-bottom: 20px; animation: fadeIn 1s ease forwards; }

    body {

  background-image: url('фон.avif'); /* сюда вставь ссылку или путь к картинке */

  background-size: cover;

  background-repeat: no-repeat;

  background-position: center center;

}

h1 {

  color: rgb(255, 255, 255);

}





    input, select, button, textarea {

      font-size: 1rem;

      padding: 10px;

      margin: 10px auto;

      width: 100%;

      max-width: 400px;

      display: block;

      border-radius: 5px;

      border: 1px solid #ccc;

    }

    .cart-item {

  display: flex;

  align-items: center;

  justify-content: space-between;

  margin-bottom: 10px;

}



    button {

      background: #28a745;

      color: white;

      border: none;

      cursor: pointer;

      transition: 0.3s;

    }

    button:hover { background: #218838; }



    table {

      width: 100%;

      border-collapse: collapse;

      margin-bottom: 20px;

      background: white;

      box-shadow: 0 0 10px #ccc;

    }

    th, td {

      padding: 10px;

      border: 1px solid #ddd;

      text-align: center;

    }

    th { background: #f8f8f8; }



    .product-img { max-width: 60px; height: auto; transition: transform 0.3s ease; }

    .product-img:hover { transform: scale(1.1); }



    .cart-summary { text-align: center; font-weight: bold; margin: 10px 0; }

    .order-form, #orderHistory { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px #ccc; margin-top: 20px; }



    .delete-order {

      background: #dc3545;

      color: white;

      border: none;

      padding: 8px 12px;

      margin-top: 10px;

      border-radius: 5px;

      cursor: pointer;

      transition: background 0.3s ease;

    }

    .delete-order:hover {

      background: #c82333;

    }



    @keyframes fadeIn {

      from { opacity: 0; transform: translateY(20px); }

      to { opacity: 1; transform: translateY(0); }

    }



    /* Новая анимация для добавления в корзину */

    @keyframes addToCart {

      0% { transform: scale(1); background-color: #28a745; }

      50% { transform: scale(1.2); background-color: #218838; }

      100% { transform: scale(1); background-color: #28a745; }

    }

    .animate-add {

      animation: addToCart 0.5s ease;

    }



    @media (max-width: 600px) {

      th, td { font-size: 12px; padding: 6px; }

      input, select, button, textarea { font-size: 0.9rem; padding: 8px; }

      .cart-summary { font-size: 1.2rem; }

      #cartList div { font-size: 0.9rem; }

      .order-form input, .order-form button { width: 90%; }

    }
    @media (max-width: 600px) {
  button.delete-item {
    width: 20px; /* Устанавливаем фиксированную ширину */
    height: 20px; /* Устанавливаем фиксированную высоту */
    font-size: 12px; /* Уменьшаем размер текста */
    padding: 0; /* Убираем лишние отступы */
  }
}

input[type="number"] {
  width: 80px !important;
  text-align: center;
  font-size: 16px;
  font-weight: bold;
  padding: 8px;
  border: 2px solid #ccc;
  border-radius: 4px;
}

  </style>
      



  <!-- SweetAlert2 -->

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>

<body>

  <!-- Блок для просмотра фото -->
  <div id="previewBlock" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:1000; pointer-events:auto;">
    <div id="previewInner" style="position:absolute; top:10%; left:50%; transform:translateX(-50%); background:white; padding:20px; border-radius:10px; box-shadow:0 0 20px #0008;">
      <span id="closePreview" style="cursor:pointer; float:right; font-size:24px;">&times;</span>
      <img id="previewImg" src="" alt="Просмотр" style="max-width:90vw; max-height:70vh; display:block; margin:auto;">
    </div>
  </div>
<!-- filepath: c:\Users\hp\Desktop\нож\index.html -->

  <h1>Мелочь - Каталог товаров</h1>



  <div class="search-sort-row">
    <input type="text" id="search" placeholder="Поиск товара..." />
    <select id="sort">
      <option value="">Сортировка по цене</option>
      <option value="asc">Сначала дешёвые</option>
      <option value="desc">Сначала дорогие</option>
    </select>
    <a href="https://kara-ssyy-oomat.github.io/scoch/" target="_blank" class="other-site-btn">Другой сайт для скотч</a>

    <a href="https://kara-ssyy-oomat.github.io/meloch/" target="_blank" class="other-site-btn">Другой сайт мелоч</a>
  </div>



  <table>

    <thead>
      <tr>
        <th>№</th>
        <th>Фото</th>
        <th>Название</th>
        <th>Цена</th>
        <th>Кол-во</th>
        <th>Добавить</th>
      </tr>
    </thead>

    <tbody id="productTable"></tbody>

  </table>

<!-- Кнопки вверх/вниз и сообщение продавцу -->
<div style="position:fixed;right:20px;bottom:30px;z-index:2100;display:flex;flex-direction:column;gap:10px;align-items:flex-end;">
  <button id="scrollUpBtn" title="Наверх" style="width:44px;height:44px;border:none;border-radius:50%;background:#007bff;color:#fff;font-size:22px;box-shadow:0 2px 8px #0002;cursor:pointer;transition:background 0.2s;">▲</button>
  <button id="scrollDownBtn" title="Вниз" style="width:44px;height:44px;border:none;border-radius:50%;background:#007bff;color:#fff;font-size:22px;box-shadow:0 2px 8px #0002;cursor:pointer;transition:background 0.2s;">▼</button>
  <button id="showContactBtn" title="Сообщение продавцу" style="width:44px;height:44px;border-radius:50%;background:#28a745;color:#fff;font-size:22px;box-shadow:0 2px 8px #0002;cursor:pointer;display:flex;align-items:center;justify-content:center;">✉️</button>
</div>

  <div class="order-form">

    <h2>Оформить заказ</h2>

    <div id="cartList"></div>

    <div class="cart-summary">Итого: <span id="totalSum">0</span> с</div>

    <button id="clearCart">Очистить корзину</button>

    <input type="text" id="name" placeholder="Ваше имя" required />

    <input type="tel" id="phone" placeholder="Телефон" required />

    <input type="text" id="address" placeholder="Адрес доставки" required />

    <button id="submitOrder">Отправить заказ</button>

  </div>



  <button id="toggleHistory">История заказов</button>

  <div id="orderHistory" style="display:none">

    <h2>История заказов</h2>

    <ul id="historyList"></ul>

  </div>



  <!-- Кнопка для открытия блока "Связаться с нами" -->
<!-- Блок Связаться с нами (скрыт по умолчанию) -->
<div id="contactBlock" style="display:none;max-width:400px;margin:40px auto 0;padding:20px;border:1px solid #ddd;border-radius:10px;box-shadow:0 2px 8px #0001;background:#fff;position:fixed;right:30px;bottom:160px;z-index:2200;">
  <h2 style="margin-top:0;">Связаться с нами</h2>
  <div style="margin-bottom:10px;">
    <strong>Телефон для связи:</strong><br>
    <a href="tel:0555332133" style="color:#007bff;text-decoration:none;">0555 33 21 33</a><br>
    <a href="tel:0559009860" style="color:#007bff;text-decoration:none;">0559 00 98 60</a>
  </div>
  <form id="contactForm">
    <input type="text" id="contactName" placeholder="Ваше имя" required style="width:100%;margin-bottom:8px;padding:6px;">
    <input type="text" id="contactPhone" placeholder="Ваш телефон" required style="width:100%;margin-bottom:8px;padding:6px;">
    <textarea id="contactMsg" placeholder="Ваше сообщение" required style="width:100%;margin-bottom:8px;padding:6px;resize:vertical;"></textarea>
    <button type="submit" style="width:100%;padding:8px 0;background:#007bff;color:#fff;border:none;border-radius:5px;font-size:16px;">Отправить</button>
  </form>
</div>

<script>
 const products = [
       {id: 1, title: 'нож киви(1200шт/кар)', price: 12,optPrice: 10, optQty: 100, image: 'фото/киви.jpg' },
      {id: 2, title: 'виктор 4(800шт/кар)', price: 20,optPrice: 18.5, optQty: 800, image: 'фото/вик4.jpg' },
      {id: 3, title: 'красный маленький В09(800шт/кар)',price: 22,optPrice: 20, optQty: 800,  image: 'фото/киз.jpg' },

      {id: 4, title: '065(1200шт/кар)', price: 20,optPrice: 18, optQty: 1200,minQty: 12, image: 'фото2/065.jpg' },
      {id: 73,  title: '011(720шт/кар)', price: 22,optPrice: 20, optQty: 720,minQty: 12, image: 'фото4/011.jpg' },
      {id: 75,  title: '4039(50шт/п)', price: 25,optPrice: 23, optQty: 50, image: 'фото4/4039.jpg' },
   
      {id: 5,  title: 'бургут(600шт/кар)', price: 25,optPrice: 24, optQty: 100, image: 'фото/бур.jpg' },
      {id: 6,  title: 'виктор 6(600шт/кар)', price: 26,optPrice: 25, optQty: 100, image: 'фото/вик6.jpg' },
      {id: 7,  title: 'м55(600шт/кар)', price: 26,optPrice: 25, optQty: 100, image: 'фото/м55.jpg' },
      {id: 92, title: 'деревяный ручка', price: 30, image: 'фото5/распро2.jpg' },

      {id: 8,  title: '608(500шт/кар)', price: 33,optPrice: 30, optQty: 500, image: 'фото/608.jpg' },
      {id: 9,  title: 'карона(5)(400шт/кар)', price: 35,optPrice: 33, optQty: 400, image: 'фото/кар6.jpg ' },
      {id: 10,  title: 'карона(6)(400шт/кар)', price: 38,optPrice: 35, optQty: 400, image: ' фото/кар5.jpg' },
      {id: 60,  title: '4066()', price: 25,minQty: 12, image: 'фото4/4066.jpg' },
      {id: 61,  title: '5066', price: 28,minQty: 12, image: 'фото4/5066.jpg' },
      {id:11,  title: '4004(360шт/кар)', price: 40,optPrice: 38, optQty: 360,minQty: 12, image: 'фото/4004.jpg' },
      {id: 12,  title: '5004(360шт/кар)', price: 45,optPrice: 40, optQty: 360,minQty: 12, image: 'фото2/5004.jpg' },
      {id: 13,  title: '6004(360шт/кар)', price: 50,optPrice: 45, optQty: 360,minQty: 12, image: 'фото/6004.jpg' },
      {id: 14,  title: '5081(480шт/кар)', price: 40,optPrice: 38, optQty: 480,minQty: 12, image: 'фото/5081.jpg' },
      {id: 15,  title: '6081(480шт/кар)', price: 45,optPrice: 40, optQty: 480,minQty: 12, image: 'фото/6081.jpg' },
      {id: 90,  title: '7081(480шт/кар)', price: 50,optPrice: 45, optQty: 480,minQty: 12, image: 'фото5/7081.jpg' },

      {id: 16,  title: '6089(480шт/кар)', price: 40,optPrice: 38, optQty: 480,minQty: 12, image: 'фото/6089.jpg' },
      {id: 91, title: 'китчен', price: 40, image: 'фото5/распро.jpg' },
      {id: 93, title: 'ола', price: 40, image: 'фото5/распро3.jpg' },

      {id: 17,  title: 'с5(480шт/кар)', price: 45,optPrice: 42, optQty: 480,minQty: 12, image: 'фото/с5.jpg' },
      {id: 18,  title: 'с6(480шт/кар)', price: 50,optPrice: 45, optQty: 480,minQty: 12, image: 'фото/с6.jpg' },
      {id: 19,  title: 'с7(360шт/кар)', price: 55,optPrice: 50, optQty: 360,minQty: 12, image: 'фото2/с7.jpg' },
      {id: 20,  title: 'резина(6)(240шт/кар)', price: 50,optPrice: 48, optQty: 240, minQty: 12,image: 'фото/резина.jpg' },
      {id: 21,  title: '6035(288шт/кар)', price: 50,optPrice: 45, optQty: 288,minQty: 12, image: 'фото/6035.jpg' },

      {id: 56,  title: 'нож(24шт)кора', price: 55,optPrice: 50, optQty: 24, image: 'фото3/мрамирсоп.jpg' },
      {id: 58,  title: 'нож(24шт)ок яшил', price: 60, image: 'фото3/мрасоп.jpg' },

      {id: 71,  title: '036', price: 100,optPrice: 85, optQty: 12, image: 'фото4/036.jpg' },

      {id: 22,  title: '037', price: 100,optPrice: 85, optQty: 12, image: 'фото/037.jpg' },
      {id: 23,  title: '034', price: 100,optPrice: 85, optQty: 12, image: 'фото/034.jpg' },
      {id: 24,  title: '038', price: 110,optPrice: 100, optQty: 12, image: 'фото/038.jpg' },
      {id: 25,  title: '039', price: 120,optPrice: 110, optQty: 12, image: 'фото/039.jpg' },
      {id: 26,  title: 'k118', price: 100,optPrice: 95, optQty: 12, image: 'фото2/118.jpg' },
      {id: 27,  title: 'k117', price: 120,optPrice: 110, optQty: 12, image: 'фото/117.jpg' },
     
      {id: 28,  title: '6147(144шт/кар)', price: 80,optPrice: 75, optQty: 12, image: 'фото/6147.jpg' },
      {id: 30,  title: '7067(144шт/кар)', price: 60,optPrice: 60, optQty: 12, image: 'фото/7067.jpg' },
      {id: 31,  title: '7149', price: 110,optPrice: 100, optQty: 12, image: 'фото/7149.jpg' },
      {id: 29,  title: 'нож 6224(144шт/кар)', price: 110,optPrice: 100, optQty: 12, image: 'фото/6224.jpg' },

      {id: 32,  title: 'нож 7224(144шт/кар)', price: 120,optPrice: 110, optQty: 12, image: 'фото/7224.jpg' },
      {id: 33,  title: 'нож 8224(144шт/кар)', price: 130,optPrice: 120, optQty: 12, image: 'фото/8224.jpg' },
      {id: 34,  title: 'нож 9224(144шт/кар)', price: 140,optPrice: 130, optQty: 12, image: 'фото/9224.jpg' },
      {id: 35,  title: 'карона(8)(240шт/кар)', price: 65,optPrice: 60, optQty: 240, image: 'фото/кар8.jpg' },
      {id: 36,  title: 'нож 5643', price: 40,minQty: 12,  image: 'фото2/5643.jpg' },
      {id: 37,  title: 'нож 5646', price: 40,minQty: 12,  image: 'фото2/5646.jpg' },
      {id: 50,  title: 'нож 5640', price: 40,minQty: 12,  image: 'фото3/5640.jpg' },
      {id: 74,  title: 'нож 6640', price: 55,minQty: 12,  image: 'фото4/6640.jpg' },
      {id: 38,  title: 'нож 7646', price: 50,minQty: 12,  image: 'фото2/7646.jpg' },
   
      {id: 51,  title: '6644', price: 45,minQty: 12,  image: 'фото3/6644.jpg' },
      {id: 39,  title: 'керамика(3)пр(144шт/кар)', price: 90,optPrice: 80, optQty: 144, image: 'фото2/керамика3.jpg' },
      {id: 40,  title: 'керамика(3)орг(144шт/кар)', price: 120,optPrice: 110, optQty: 144, image: 'фото2/кер3.jpg' },
      {id: 41,  title: '', price: 180, image: '' },
      {id: 42,  title: 'топор мебел 219(150шт/кар)', price: 100,optPrice: 90, optQty: 10, image: 'фото2/мебел.jpg' },
      {id: 43,  title: 'топор нерж руч 002(150шт/кар)', price: 150,optPrice: 130, optQty: 10, image: 'фото2/нер.jpg' },
      {id: 44,  title: 'топор 027(160шт/кар)', price: 160,optPrice: 150, optQty: 10, image: 'фото2/027.jpg' },
      {id: 45,  title: 'топор нерж руч бол195(100шт/к)', price: 220,optPrice: 200, optQty: 10, image: 'фото2/неркат.jpg' },
      {id: 59,  title: 'топор 075(100шт/к)', price: 200,optPrice: 190, optQty: 10, image: 'фото4/075.jpg' },
      {id: 46,  title: 'топор 009 орг(60шт/к)', price: 300,optPrice: 280, optQty: 10, image: 'фото2/009.jpg' },
      {id: 69,  title: 'топор большой(40шт/к)', price: 280,optPrice: 260, optQty: 10, image: 'фото4/чопкикатта.jpg' },
      {id: 70,  title: 'топор маленький(50шт/к)', price: 240,optPrice: 220, optQty: 10, image: 'фото4/чопкикичик.jpg' },
      
      {id: 72,  title: 'нож 040(180шт/к)', price: 170,optPrice: 165, optQty: 12, image: 'фото4/040.jpg' },
      {id: 47,  title: 'нож 041(144шт/к)', price: 180,optPrice: 170, optQty: 12,  image: 'фото3/041.jpg' },  
      {id: 48,  title: 'нож 042(144шт/к)', price: 190,optPrice: 180, optQty: 12, image: 'фото3/042.jpg' },
      {id: 49,  title: 'нож 990(200шт/к)', price: 130,optPrice: 120, optQty: 10, image: 'фото3/990.jpg' },

    
      {id: 52,  title: 'маленький мусат(200шт/к)', price: 40,optPrice: 35, optQty: 100, image: 'фото3/майдамус.jpg' },
      {id: 53,  title: 'мусат мрамор(144шт/к)', price: 100,optPrice: 90, optQty: 10, image: 'фото3/мрамирмус.jpg' },
      {id: 55,  title: 'средний мусат(100шт/к)', price: 150,optPrice: 140, optQty: 10, image: 'фото3/средмус.jpg' },
      {id: 57,  title: 'мусат деревяный(72шт/к)', price: 220,optPrice: 200, optQty: 10, image: 'фото3/средниймус.jpg' },
      {id: 54,  title: 'мусат орг(72шт/к)', price: 320,optPrice: 300, optQty: 10, image: 'фото3/оргмус.jpg' },
      

      //{id: 62,  title: 'кичен(10)', price: 100, image: 'фото4/кичен10.jpg' },
      //{id: 63,  title: 'кичен(11)', price: 110, image: 'фото4/кичен11.jpg' },

      {id: 64,  title: 'трамонтина(8)(144шт/к)', price: 260,optPrice: 250, optQty: 12, image: 'фото4/трамонтина8.jpg' },
      {id: 65,  title: 'трамонтина(9)(144шт/к)', price: 280,optPrice: 270, optQty: 12, image: 'фото4/трамонтина9.jpg' },
      {id: 66,  title: 'трамонтина(10)(144шт/к)', price: 300,optPrice: 290, optQty: 12, image: 'фото4/трамонтина10.jpg' },
      {id: 67,  title: 'трамонтина(11)(144шт/к)', price: 320,optPrice: 300, optQty: 12, image: 'фото4/трамонтина11.jpg' },
      {id: 68,  title: 'трамонтина(12)(144шт/к)', price: 340,optPrice: 320, optQty: 12, image: 'фото4/трамонтина12.jpg' },
      
      {id: 112, title: 'бабочка чал', price: 180, image: 'фото5/бабочка.jpg' },
      {id: 113, title: 'гул чал', price: 60, image: 'фото5/гулчал.jpg' },

      {id: 77,  title: 'ножницы 120(720шт/к)', price: 25,optPrice: 23, optQty: 120,minQty: 12, image: 'фото4/120.jpg' },
      {id: 78,  title: 'ножницы 160(720шт/к)', price: 30,optPrice: 25, optQty: 120,minQty: 12, image: 'фото4/170 (2).jpg' },
      {id: 94, title: 'ножницы 170(480шт/к)', price: 35,optPrice: 30, optQty: 120, minQty: 12,image: 'photo' },

      {id: 82,  title: 'ножницы 6012(480шт/к)', price: 40,optPrice: 38, optQty: 120,minQty: 12, image: 'фото4/6012.jpg' },
      {id: 84,  title: 'ножницы 9018(240шт/к)', price: 45,optPrice: 42, optQty: 120,minQty: 12, image: 'фото4/9018.jpg' },
      {id: 81,  title: 'ножницы 3010(240шт/к)', price: 55,optPrice: 50, optQty: 120,minQty: 12, image: 'фото4/3010.jpg' },
      {id: 83,  title: 'ножницы 6014(240шт/к)', price: 55,optPrice: 50, optQty: 120,minQty: 12, image: 'фото4/6014.jpg' },
      {id: 88,  title: 'ножницы кин 333(180шт/к)', price: 50,optPrice: 45, optQty: 180,minQty: 12, image: 'фото4/кин.jpg' },
      {id: 80,  title: 'ножницы 280(240шт/к)', price: 55,optPrice: 53, optQty: 120,minQty: 12, image: 'фото4/280.jpg' },
      {id: 79,  title: 'ножницы 260(240шт/к)', price: 60,optPrice: 55, optQty: 120,minQty: 12, image: 'фото4/260.jpg' },
      {id: 95, title: 'ножницы 2090(180шт/к)', price: 75,optPrice: 70, optQty: 120,minQty: 12, image: '' },

      {id: 86,  title: 'ножницы красный(180шт/к)', price: 80,optPrice: 75, optQty: 180,minQty: 12, image: 'фото4/кизил.jpg' },

     // {id: 85,  title: 'ножницы для цветы', price: 100, image: 'фото4/гул.jpg' },
     // {id: 89,  title: 'ножницы кухыный', price: 120, image: 'фото4/кухиний.jpg' },

      {id: 87,  title: 'ножницы желтый', price: 200,optPrice: 180, optQty: 10, image: 'фото4/кизкар.jpg' },
      {id: 96, title: 'ножницы жел', price: 190,optPrice: 180, optQty: 10, image: '' },
      {id: 100, title: 'ножницы жел', price: 180,optPrice: 170, optQty: 10,  image: '' },

      {id: 97, title: 'ножницы 9', price: 280,optPrice: 270, optQty: 10,  image: 'фото5/9.jpg' },
      {id: 98, title: 'ножницы 10', price: 300, optPrice: 290, optQty: 10, image: '' },
      {id: 99, title: 'ножницы 11', price: 320,optPrice: 310, optQty: 10,  image: 'фото5/11.jpg' },

      {id: 109, title: 'ножницы 215', price: 150, image: 'фото5/215.jpg' },
      {id: 110, title: 'ножницы 235', price: 160, image: 'фото5/235.jpg' },
      {id: 111, title: 'ножницы 255', price: 170, image: 'фото5/255.jpg' },

      {id: 101, title: 'кой качы мал(100шт/к)', price: 110, image: '' },
      {id: 102, title: 'кой качы бол(100шт/к)', price: 120, image: '' },

      {id: 103, title: 'китайский нож', price: 600, image: 'фото5/китай.jpg' },
      {id: 104, title: 'узб1', price: 0, image: 'фото5/узб1.jpg' },
      {id: 105, title: 'узб1', price: 0, image: 'фото5/узб2.jpg' },
      {id: 106, title: 'узб1', price: 0, image: 'фото5/узб3.jpg' },
      {id: 107, title: 'узб1', price: 0, image: 'фото5/узбте.jpg' },
      {id: 108, title: 'узб1', price: 0, image: 'фото5/чуст.jpg' },
      


      {id: 114, title: 'магнит для нож 38см', price: 120, image: 'фото6/38см.jpg' },
      {id: 115, title: 'магнит для нож 50см', price: 140, image: 'фото6/50см.jpg' },
      {id: 116, title: 'магнит для нож 55см', price: 160, image: 'фото6/55см.jpg' },
      {id: 117, title: 'складной нож дер бол', price: 200,optPrice: 180, optQty: 12,  image: 'фото6/пинкаегоч.jpg' },
    //  {id: 118, title: 'складной нож чех бол', price: 150, image: 'фото6/чехол.jpg' },
     {id: 119, title: 'складной нож чех сред', price: 160, image: 'фото6/чехол.jpg' },
       {id: 120, title: 'складной нож чех мал', price: 130, image: 'фото6/чехол.jpg' },
      {id: 121, title: 'бабочка бел', price: 180, image: 'фото6/бабочкаок.jpg' },
      {id: 122, title: 'бабочка чер', price: 200, image: 'фото6/бабочкачор.jpg' },
      {id: 123, title: 'цвет чалав', price: 60, image: 'фото6/гул (2).jpg' },
      {id: 124, title: 'черный склад нож', price: 240, image: 'фото6/кора.jpg' },
      {id: 125, title: 'крокодил', price: 60, image: 'фото6/крокодил.jpg' },
      {id: 126, title: '', price: 150, image: '' },






      {id: 127, title: 'брусок овал орг', price: 70, image: 'фото6/тошавал.jpg' },
      {id: 128, title: 'брусок квад', price: 60, image: 'фото6/тошторбур.jpg' },

      {id: 76,  title: 'точилка пр (3)', price: 45, image: 'фото4/точилкапр3.jpg' },
      
      {id: 129,  title: 'точилка для ножей', price: 55, image: 'фото2/тач3.jpg' }
      
    ];



    const cart = JSON.parse(localStorage.getItem('cart')) || [];



    const productTable = document.getElementById('productTable');

    const search = document.getElementById('search');

    const sort = document.getElementById('sort');

    const cartList = document.getElementById('cartList');

    const totalSum = document.getElementById('totalSum');



    function renderProducts() {

      let filtered = products.filter(p => p.title?.trim() && p.image?.trim());

      if (search.value) {

        filtered = filtered.filter(p => p.title.toLowerCase().includes(search.value.toLowerCase()));

      }

      if (sort.value) {

        filtered.sort((a, b) => sort.value === 'asc' ? a.price - b.price : b.price - a.price);

      }

      productTable.innerHTML = '';
      filtered.forEach((p, idx) => {
        const minQty = p.minQty || 1;
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${idx + 1}</td>
          <td><img src="${p.image}" class="product-img" alt="${p.title}" style="cursor:pointer;" onclick="showPreview('${p.image}')"/></td>
          <td>
            ${(() => {
              // Находим все скобки
              const matches = p.title.match(/\(.*?\)/g);
              // Если есть скобки
              if (matches && matches.length) {
                // Последнее выражение в скобках
                const lastBracket = matches[matches.length - 1];
                // Убираем последнее выражение в скобках из названия
                const main = p.title.replace(lastBracket, '').trim();
                return `
                  ${main}
                  <div style="font-size:12px;color:#888;">${lastBracket}</div>
                `;
              } else {
                // Если скобок нет — просто название
                return p.title;
              }
            })()}
          </td>
          <td>
            ${p.optPrice ? 
              `<div>${p.price}c</div>
               <div style="display: none; color: #28a745; font-weight: bold;">${p.optPrice}c (от ${p.optQty}шт)</div>` 
              : `${p.price}c`}
          </td>
          <td><input type="number" min="${minQty}" step="${minQty}" value="${minQty}" oninput="updatePriceDisplay(this, ${p.price}, ${p.optPrice || p.price}, ${p.optQty || 0})" style="width: 80px !important; text-align: center; font-size: 16px; font-weight: bold;" /></td>
          <td><button onclick="addToCart(${p.id}, '${p.title}', ${p.price}, '${p.image}', this)">добавить</button></td>
        `;
        productTable.appendChild(row);
      });

    }

    function updatePriceDisplay(input, retailPrice, optPrice, optQty) {
      const qty = +input.value;
      const priceCell = input.parentElement.previousElementSibling;
      const priceDivs = priceCell.getElementsByTagName('div');
      
      if (optQty && qty >= optQty) {
        // Если достигнуто оптовое количество
        if (priceDivs.length > 0) {
          priceDivs[0].style.display = 'none';
          priceDivs[1].style.display = 'block';
          priceDivs[1].style.color = '#000';
        }
      } else {
        // Если розничное количество
        if (priceDivs.length > 0) {
          priceDivs[0].style.display = 'block';
          priceDivs[1].style.display = 'none';
        }
      }
    }

    function addToCart(id, title, price, image, btn) {
      const product = products.find(p => p.id === id);
      const minQty = product.minQty || 1;
      const qty = +btn.parentElement.parentElement.querySelector('input').value;

      // Проверка: не меньше минимума и только кратно минимуму
      if (qty < minQty || qty % minQty !== 0) {
        Swal.fire('Ошибка', `Можно купить только кратно ${minQty} (например, ${minQty}, ${minQty*2}, ...)`, 'warning');
        return;
      }

      // Определяем цену в зависимости от количества
      let finalPrice = price;
      if (product.optPrice && qty >= product.optQty) {
        finalPrice = product.optPrice;
      }

      const index = cart.findIndex(item => item.id === id);
      if (index !== -1) {
        cart[index].qty += qty;
        // Обновляем цену если достигнут оптовый порог
        if (product.optPrice && cart[index].qty >= product.optQty) {
          cart[index].price = product.optPrice;
        }
      } else {
        cart.push({ id, title, price: finalPrice, qty });
      }
      updateCart();

      // Анимация кнопки
      btn.classList.add('animate-add');
      setTimeout(() => btn.classList.remove('animate-add'), 500);

      // Показываем уведомление
      Swal.fire({
        title: 'Товар добавлен в корзину!',
        text: `${title} × ${qty} был добавлен в вашу корзину.${finalPrice !== price ? ' (Оптовая цена)' : ''}`,
        icon: 'success',
        confirmButtonText: 'Ок',
        position: 'bottom',
        showConfirmButton: true,
        timer: 1500,
        padding: '10px',
        toast: true
      });

      localStorage.setItem('cart', JSON.stringify(cart));
    }




    function updateCart() {

      cartList.innerHTML = '';

      let total = 0;

      cart.forEach((item, i) => {

        total += item.qty * item.price;

        const div = document.createElement('div');

        div.classList.add('cart-item');

        div.innerHTML = `
  <span style="flex-grow:1;">${item.title} — ${item.qty} × ${item.price}c = ${item.qty * item.price}c</span>
  <button class="delete-item" onclick="removeFromCart(${i})">&times;</button>
`;

        cartList.appendChild(div);

      });

      totalSum.textContent = total;



      // Проверка на пустоту корзины

      const clearCartButton = document.getElementById('clearCart');

      if (cart.length === 0) {

        clearCartButton.style.display = 'none'; // скрыть кнопку, если корзина пуста

      } else {

        clearCartButton.style.display = 'block'; // показать кнопку, если корзина не пуста

      }



      // Сохраняем корзину в localStorage

      localStorage.setItem('cart', JSON.stringify(cart));

    }





    function removeFromCart(i) {

      cart.splice(i, 1);

      updateCart();

    }



    document.getElementById('submitOrder').onclick = () => {

      const name = document.getElementById('name').value.trim();

      const phone = document.getElementById('phone').value.trim();

      const address = document.getElementById('address').value.trim();

      if (!name || !phone || !address || cart.length === 0) {

        Swal.fire('Ошибка', 'Заполните все поля и добавьте товары', 'warning');

        return;

      }
      const items = cart.map(i => `${i.title} — ${i.qty}×${i.price}c=${i.qty * i.price}`).join('\n');

const total = cart.reduce((sum, item) => sum + item.qty * item.price, 0);

const msg = `Новый заказ:
Имя: ${name}
Телефон: ${phone}
Адрес: ${address}
Товары:
${items}

Итого: ${total}c`;
  

  fetch('https://api.telegram.org/bot7960727448:AAF0B2mizrzj7sjHP68n-1IcjLoNc6kwVkE/sendMessage', {

    method: 'POST',

    headers: { 'Content-Type': 'application/json' },

    body: JSON.stringify({ chat_id: '5567924440', text: msg })
    

  })
    fetch('https://api.telegram.org/bot7960727448:AAF0B2mizrzj7sjHP68n-1IcjLoNc6kwVkE/sendMessage', {

    method: 'POST',

    headers: { 'Content-Type': 'application/json' },

    body: JSON.stringify({ chat_id: '246421345', text: msg })
    

  }).then(r => {

    if (r.ok) {

      Swal.fire('Успех!', 'Ваш заказ отправлен!', 'success');

      cart.length = 0;

      updateCart();

      localStorage.removeItem('cart');
      localStorage.setItem('userData', JSON.stringify({
    name,
    phone,
    address
  }));
      document.getElementById('name').value = '';
      document.getElementById('phone').value = '';
      document.getElementById('address').value = '';

    } else {

      Swal.fire('Ошибка', 'Не удалось отправить заказ. Попробуйте позже.', 'error');

    }

    }).catch(error => {

      console.error(error);

      Swal.fire('Ошибка', 'Не удалось отправить заказ. Проверьте подключение к интернету.', 'error');

    });

  };

document.getElementById('clearCart').onclick = () => {

  cart.length = 0; // очищаем массив корзины

  updateCart();    // обновляем отображение

  localStorage.removeItem('cart'); // убираем данные из localStorage

  Swal.fire('Корзина очищена!', '', 'success'); // показываем уведомление

};





      const items = cart.map(i => `${i.title} — ${i.qty}×${i.price}c`).join('\n');

      const total = cart.reduce((sum, item) => sum + item.qty * item.price, 0);



      const msg = `Новый заказ:

Имя: ${name}

Телефон: ${phone}

Адрес: ${address}

Товары:

${items}



Итого: ${total}c`;



      fetch('https://api.telegram.org/bot<ТВОЙ_ТОКЕН>/sendMessage', {

        method: 'POST',

        headers: { 'Content-Type': 'application/json' },

        body: JSON.stringify({ chat_id: '<ТВОЙ_CHAT_ID>', text: msg })

      }).then(r => {

        if (r.ok) {

          Swal.fire('Успех!', 'Ваш заказ отправлен!', 'success');

          cart.length = 0;

          updateCart();

          localStorage.removeItem('cart');

          document.getElementById('name').value = '';

          document.getElementById('phone').value = '';

          document.getElementById('address').value = '';

        } else {

          Swal.fire('Ошибка', 'Не удалось отправить заказ. Попробуйте позже.', 'error');

        }

      });

    ;



    function deleteOrder(index) {

      let history = JSON.parse(localStorage.getItem('orderHistory') || '[]');

      history.splice(index, 1);

      localStorage.setItem('orderHistory', JSON.stringify(history));

      document.getElementById('toggleHistory').click();

      document.getElementById('toggleHistory').click();

    }



    document.getElementById('toggleHistory').onclick = () => {

  const hist = document.getElementById('orderHistory');

  hist.style.display = hist.style.display === 'none' ? 'block' : 'none';



  const history = JSON.parse(localStorage.getItem('orderHistory') || '[]');

  const list = document.getElementById('historyList');

  list.innerHTML = '';



  if (history.length === 0) {

    list.innerHTML = '<li>История заказов пуста.</li>';

    document.getElementById('toggleHistory').style.display = 'none'; // Скрыть кнопку, если нет заказов

    return;

  }



  history.forEach((o, index) => {

    const li = document.createElement('li');

    const itemsText = o.items.map(i => `${i.title} × ${i.qty}`).join(', ');

    li.innerHTML = `

      <strong>Заказ от: ${o.time}</strong>

      <p>Имя: ${o.name}</p>

      <p>Телефон: ${o.phone}</p>

      <p>Адрес: ${o.address}</p>

      <p>Товары: ${itemsText}</p>

      <p><strong>Итого: ${o.total}c</strong></p>

      <button class="delete-order" onclick="deleteOrder(${index})">Удалить</button>

    `;

    list.appendChild(li);

  });



  // Показать кнопку только если есть заказы

  document.getElementById('toggleHistory').style.display = history.length === 0 ? 'none' : 'block';

};





    search.oninput = renderProducts;

    sort.onchange = renderProducts;

    renderProducts();

    updateCart();
    function showPreview(src) {
  document.getElementById('previewImg').src = src;
  document.getElementById('previewBlock').style.display = 'block';
  document.body.classList.add('modal-open');
}

document.getElementById('closePreview').onclick = function() {
  document.getElementById('previewBlock').style.display = 'none';
  document.body.classList.remove('modal-open');
};

document.getElementById('previewBlock').onclick = function(e) {
  if (e.target === this) {
    this.style.display = 'none';
    document.body.classList.remove('modal-open');
  }
};

// Обработчик формы "Связаться с нами"
document.getElementById('contactForm').onsubmit = function(e) {
  e.preventDefault();
  const name = document.getElementById('contactName').value.trim();
  const phone = document.getElementById('contactPhone').value.trim();
  const msg = document.getElementById('contactMsg').value.trim();
  if (!name || !phone || !msg) {
    Swal.fire('Ошибка', 'Пожалуйста, заполните все поля.', 'warning');
    return;
  }
  const text = `Новое сообщение с сайта!\nИмя: ${name}\nТелефон: ${phone}\nСообщение: ${msg}`;
  fetch('https://api.telegram.org/bot7960727448:AAF0B2mizrzj7sjHP68n-1IcjLoNc6kwVkE/sendMessage', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ chat_id: '5567924440', text })
  }).then(r => {
    if (r.ok) {
      Swal.fire('Успех!', 'Ваше сообщение отправлено!', 'success');
      document.getElementById('contactForm').reset();
    } else {
      Swal.fire('Ошибка', 'Не удалось отправить сообщение. Попробуйте позже.', 'error');
    }
  }).catch(() => {
    Swal.fire('Ошибка', 'Не удалось отправить сообщение. Проверьте подключение к интернету.', 'error');
  });
};

// Кнопки прокрутки вверх/вниз
const scrollUpBtn = document.getElementById('scrollUpBtn');
const scrollDownBtn = document.getElementById('scrollDownBtn');

if (scrollUpBtn && scrollDownBtn) {
  scrollUpBtn.onclick = () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };
  scrollDownBtn.onclick = () => {
    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
  };
}

// Показ/скрытие блока "Связаться с нами"
const showContactBtn = document.getElementById('showContactBtn');
const contactBlock = document.getElementById('contactBlock');

showContactBtn.onclick = function(e) {
  e.stopPropagation();
  if (contactBlock.style.display === 'none' || contactBlock.style.display === '') {
    contactBlock.style.display = 'block';
  } else {
    contactBlock.style.display = 'none';
  }
};
// Скрывать блок при клике вне его
window.addEventListener('click', function(e) {
  if (contactBlock.style.display === 'block' && !contactBlock.contains(e.target) && e.target !== showContactBtn) {
    contactBlock.style.display = 'none';
  }
});
</script>

</body>

</html>